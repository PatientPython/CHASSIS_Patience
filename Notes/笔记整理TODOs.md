- [ ] 从头开始整，利用好林宸曳的那部分内容。不写LQR部分，只写其他部分，对我来说就是 u = -kx 直接得出输出指令然后往后写。林宸曳那个解决了怎么得出K的问题，林宸曳写的那一大堆建模是建模的A和B进而计算出的K，用的是matlab自带的LQR函数计算的。K = lqr(A,B,Q,R); 这个相当于是一个封装好的函数，具体怎么个原理再看看DRCAN的书

- [ ] LQR的控制向量是基于虚拟的模型来说的，因此有VMC引入，控制向量是髋关节扭矩和轮子扭矩。支持力是自行调节的量。

- [ ] 然后是对五连杆末端的动力学和运动学求解。运动学求解的是末端的角速度，动力学求解是引入虚功原理计算的虚拟杆的扭矩和径向力

- [ ] 之后这些基本求解都封装成了API可以直接调用

  



然后开始向上扩展新功能



- [ ] 地面支持力估计来达成离地检测，实现离地时不乱动能稳定离地落地
- [ ] 卡尔曼滤波器实现对速度的准确观测，核心是融合车身加速度计和轮速计算出的车身速度两个传感器数据



然后对车做了一些额外的控制

- [ ] 为了稳定轮速，加入了对轮速误差的力矩补偿
- [ ] 为了调节腿长，加入了腿长PID
- [ ] 为了避免侧翻，加入了roll轴PID
- [ ] 为了快速响应，加入了前馈【重力前馈（可以理解为腿长PID的前馈）、侧向惯性力前馈（可以理解为roll轴PID的前馈）】



然后是对车进行控制加入了一些操作相关的功能



- [ ] 为了读取指令，写了一套遥控器指令的控制逻辑
- [ ] 为了实现整体控制，写了一套状态机
- [ ] 为了调节高度，加入了腿长控制
- [ ] 为了实现跳跃，写了一套跳跃子状态机